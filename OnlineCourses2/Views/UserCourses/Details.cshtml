@model OnlineCourses2.Models.Course

<main style="max-width: 900px; margin: 40px auto; padding: 0 20px;">

    <h2 style="margin-bottom: 20px;">@Model.Title</h2>

    @if (!string.IsNullOrEmpty(Model.ImagePath))
    {
        <img src="@Model.ImagePath" style="width:100%; max-height:350px; object-fit:cover; border-radius:10px;" />
    }
    else
    {
        <div style="width:100%; height:250px; background:#e0e0e0; border-radius:10px;
                        display:flex; align-items:center; justify-content:center; color:#777;">
            Няма снимка
        </div>
    }

    <div style="margin-top: 20px;">

        <p><strong>Категория:</strong> @Model.Category?.Name</p>
        <p><strong>Сертификат:</strong> @(Model.HasCertificate ? "Да" : "Не")</p>
        <p><strong>Начална дата:</strong> @Model.StartDate.ToString("dd.MM.yyyy")</p>
        <p><strong>Крайна дата:</strong> @Model.EndDate.ToString("dd.MM.yyyy")</p>
        <p><strong>Цена:</strong> @Model.Price лв.</p>
        <p><strong>Максимален брой участници:</strong> @Model.MaxParticipants</p>

        <h3 style="margin-top: 25px;">Описание</h3>
        <p>@Model.Description</p>

        <hr />

        @if (User.IsInRole("Admin") || User.IsInRole("Organizer"))
        {
            <p style="color:#888;">Организаторите и администраторите не могат да се записват.</p>
        }
        else if ((bool)ViewBag.IsEnrolled)
        {
            <p style="color:gray; font-weight:bold;">Вече сте записан в този курс.</p>
        }
        else
        {
            <form method="post" asp-action="Enroll" asp-route-id="@Model.Id">
                <button type="submit"
                        style="background:#a8e6cf; padding:10px 20px; border:none; border-radius:6px; color:white;">
                    Запиши се
                </button>
            </form>
        }

    </div>

    <a asp-action="All" style="display:inline-block; margin-top:20px; text-decoration:none; color:#555;">
        ← Назад към всички курсове
    </a>

</main>